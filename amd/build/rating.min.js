define("mod_proposal/rating",["exports","core/toast","core/ajax"],(function(_exports,_toast,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{document.querySelectorAll(".star-rating:not(.readonly) label").forEach((star=>{star.addEventListener("click",(function(event){this.style.transform="scale(1.2)",setTimeout((()=>{this.style.transform="scale(1)"}),200),sendRating(event.target.dataset.entryid,event.target.dataset.rate)}))}))};const sendRating=(entryid,rate)=>{_ajax.default.call([{methodname:"mod_proposal_rate",args:{entryid:entryid,rate:rate}}])[0].done(function(response){document.getElementById("average-badge-div-"+entryid).innerHTML=response.rate,(0,_toast.add)("Avaliação enviada",{type:"success"})}.bind(void 0)).fail((function(error){window.console.log(error);var message=error.message;message||(message=error.error),(0,_toast.add)(message,{type:"danger"})}))}}));

//# sourceMappingURL=rating.min.js.map